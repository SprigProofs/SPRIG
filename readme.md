# Sprig

www.sprig.ch

A description of the SPRIG protocol can be found here: https://export.arxiv.org/abs/2102.03044v1

This repository contains a centralised version of the SPRIG protocol
whose purpose is to experiment with the protocol
and to serve as future reference for a decentralised version.

The protocol is implemented as a library
in [`sprig.py`](./sprig.py) and a Web API is
developped in [`api.py`](./api.py).

There are four parts in this repository:
 - The SPRIG Library, written in Python and without any dependency -> [`sprig.py`](./sprig.py)
 - A collection of languages descriptions that provide the backend of the protocol -> [`languages/`](./languages)
 - An web API, written in Python with FastAPI -> [`api.py`](./api.py)
 - A web interface, written in Vue 3 -> [`frontend/`](./frontend)


## SPRIG library

Status: *Completed*
Dependencies: Python 3.8

The library contains the logic of the protocol agnostic of the underlying proof language.
It can handle claim and challenges, stakes and bounties and updates SPRIG Trees over time.

## Languages

Status: *Almost Done*
Dependencies: Python 3.8

Languages specify the format of claims and the low level verification mechanisms.
Support for [Lean 3](https://leanprover.github.io/) should work in most cases, 
but need more testing.
We implemented a toy language to represent Tic Tac Toe games, which is complete.

## Web API / Server

Status: *In progress*
Dependencies: Python 3.8, FastAPI

The API / Server is the interface from the library code to the web, so that modifications of SPRIG trees
can be made by HTTP requests. The API is generated by FastAPI which provides documentation (with the OpenAPI format)
and communicates via the standard JSON format.

## Web Interface

Status: *In progress*
Dependencies: Vue 3, Vite

The Web interface is the user facing part of the project.

### For developpers

All dependencies for the web can be installed with

```shell script
cd frontend
npn install
```

This will install:
- [Vite](https://vitejs.dev/): the build tool
- [Vue 3](https://vuejs.org/): the frontend framework that provides components
- [lodash](https://lodash.com/): a collection of utility functions
- [dayjs](https://day.js.org/): utilities to manipulate dates and times
- [tailwindcss](https://tailwindcss.com/): a CSS framework
- [element-plus](element-plus.org/): a collection of ready-made components
- [oh-vue-icons](oh-vue-icons.js.org/): a collection of icons


## Dependencies

This code is meant to be run with a recent version of Python (>= 3.8),
and the web api need `FastAPI` (`pip install fastapi`) to run.
It can be run with `uvicorn` as
```shell script
uvicorn api:api
```

Alternatively, if you have `make`, `poetry` and `npm` installed,
you can run `make install` to get the dependencies and
then `make run` or `make dev` to start the server in production
or development mode.
